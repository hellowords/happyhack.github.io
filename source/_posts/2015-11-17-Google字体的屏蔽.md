---
title: 2015-11-17-Google字体的屏蔽
tags:
  - Google
  - 胡说
id: 30
categories:
  - 胡说
date: 2015-11-17 12:02:04
---

昨晚在访问网站的时候发现打开速度非常慢，查了一下是因为自带主题里面用来Google字体，但是Google相关服务在天朝无法使用...

以下是一些解决办法：

1.让后台禁用谷歌字体，在\wp-includes\script-loader.php中加入如下代码

function coolwp_remove_open_sans_from_wp_core(){
	wp_deregister_style('open-sans');
	wp_register_style('open-sans',false);
	wp_enqueue_style('open-sans','');
}
禁用Google字体，修改的时候要注意备份文件！
2.前台的主题中也有一些主题是用了googl相关的服务的.在主题目录中/functions.php 增加如下代码：

add_filter( 'gettext_with_context', 'wpjam_disable_google_fonts', 888, 4);
function wpjam_disable_google_fonts($translations, $text, $context, $domain ) {
	$google_fonts_contexts = array('Open Sans font: on or off','Lato font: on or off','Source Sans Pro font: on or off','Bitter font: on or off');
	if( $text == 'on' && in_array($context, $google_fonts_contexts ) ){
		$translations = 'off';
	}

	return $translations;
}

刷新缓存文件！
----------------------------------我是分割线--------------------------------
网上有说用插件来优化Google字体的，但是我觉得不是很靠谱。所以就直接修改了代码，
这里我就不附相关插件了。同时360也有一个Google字体的镜像，没试过！
以上！